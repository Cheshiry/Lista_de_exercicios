<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/locale/pt-br.js"></script>
    <script>
        dayjs.locale('pt-br')
    </script>
</head>

<body>
    <form onsubmit="salvarAtividade(event)">
        <div>
          <input type="text" placeholder="Qual a atividade?" name="atividade">
        </div>
        <div>
          <select name="dia">
          <option value="2024-03-01">01 de fevereiro</option>
        </select>
        </div>
      
        <div>
          <select name="hora">
        <option value="10:30">10:30</option>
      </select>
        </div>
        <button>Salvar Atividade</button>
      </form>
      
      <main>
        <h1>Atividade</h1>
      
        <section></section>
      
      </main>
</body>
<script>
const formatador = (data) => {

return{
  dia: {
    numerico: dayjs(data).format('DD'),
    semana:{
      curto: dayjs(data).format('ddd'),
      longo: dayjs(data).format('dddd'),

    }
  },
  mes: dayjs(data).format('MMMM'),
  hora: dayjs(data).format('HH:mm')
}

}

const atividade = {
nome: "Almoço",
data: new Date("2024-07-08 10:00"),
finalizada: true

}

let atividades = [
atividade,
{
  nome: 'Academia em grupo',
  data: new Date("2024-07-09 12:00"),
  finalizada: false
},
{
  nome: 'Gamming session',
  data: new Date("2024-07-09 16:00"),
  finalizada: true
},

]

//atividades = []


//arrow  function
const criarItemDeAtividade = (atividade) => {

let input = '<input type="checkbox"'

if (atividade.finalizada) {
  input += 'checked'
}

input += '>'

const formatar = formatador(atividade.data);

return `
<div>
  ${input}
  <span>${atividade.nome}</span>
  <time>${formatar.dia.semana.longo}, 
  dia ${formatar.dia.numerico} 
  de ${formatar.mes} 
  às ${formatar.hora}h </time>
</div>
`
}

const AtualizarListaDeAtividade = () =>{
const Section = document.querySelector('section')

//se a lista está vazia
if(atividades.length == 0){
Section.innerHTML += `<p>Nenhuma atividade cadastrada</p>`
return//quando acha return para a execução daqui pra baixo
}

for (let atividade of atividades) {

Section.innerHTML += criarItemDeAtividade(atividade)

}

}

AtualizarListaDeAtividade()

const salvarAtividade = (event) =>{
event.preventDefault()
}

const criarDiasSelecao = () => {
const dias = [
  "2024-02-28",
  "2024-02-29",
  "2024-03-01",
  "2024-03-02",
  "2024-03-03",
]

let diasSelecao = ''

for(let dia of dias){
  const formatar = formatador (dia)
  const diaFormatado = `
  ${formatar.dia.numerico} de 
  ${formatar.mes}`

  diasSelecao += `
  <option value="${dia}">${diaFormatado}</option>
  `
}

document
.querySelector('select[name="dia"]')
.innerHTML = diasSelecao
}
criarDiasSelecao()
</script>

</html>